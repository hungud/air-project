@model register_functionlity.DB.Model.UserModel
@{
    ViewBag.Title = "Register";
    Layout = "~/Views/Shared/_MasterLayoutMain.cshtml";
}


<div class="row">
    <div class="col-xs-12 col-sm-12">
        <div class="widget-body">
            <div class="widget-main">
                <div class="row">
                    <div class="container">

                        <h2>@ViewBag.Title</h2>

                        @using (Html.BeginForm("Register", "Account", new { ReturnUrl = ViewBag.ReturnUrl }, FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
                        {

                           <input type="hidden" name="CompanyType" id="hdCompanyType" />
                        <input type="hidden" name="ParentCompanyID" id="ParentCompanyID" />
                            <hr />
                            

                            <div class="form-group">
                                @Html.Label("Phone Number", "Phone Number", new { @class = "col-md-2 control-label" })
                                <div class="col-md-10">
                                    @if (Model.DisabledUserFields)
                                    {
                                        @Html.TextBoxFor(m => m.PhoneNumber, new { @class = "form-control",required="required",placeholder="4402145601" })
                                    }
                                    else
                                    {
                                        @Html.TextBoxFor(m => m.PhoneNumber, new { @class = "form-control", @disabled = "disabled", placeholder = "4402145601" })
                                    }
                                </div>
                            </div>
                            if (Model.DisabledUserFields)
                            {
                                <div class="form-group">
                                    <div class="col-md-offset-2 col-md-10">
                                        <input name="btnSubmit" type="submit" class="btn btn-primary" value="Find Company" />
                                    </div>
                                </div>
                            }
                            <hr />
                            @Html.ValidationSummary("", new { @class = "text-danger" })
                            IDictionary<string, Object> txtAttrs = new Dictionary<string, Object>();

                            //if (Model.DisableUserCompany)
                            //{
                            //    txtAttrs["disabled"] = "disabled";
                            //}
                            txtAttrs["class"] = "form-control";


                            //if (!Model.HideCompany)
                            {
                                <div class="col-md-6 main-company-container">
                                    <h3>Company Detail</h3>
                                    <hr />
                                    <div class="form-group">
                                        @Html.LabelFor(m => m.CompanyName, new { @class = "col-md-4 control-label" })
                                        <div class="col-md-8">
                                            @Html.TextBoxFor(m => m.CompanyName, new { @class = "form-control", required = "required", placeholder = "Company Name" })
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        @Html.LabelFor(m => m.StreetAddress, new { @class = "col-md-4 control-label" })
                                        <div class="col-md-8">
                                            @Html.TextBoxFor(m => m.StreetAddress, new { @class = "form-control", required = "required", placeholder = "121 Wall Street" })
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        @Html.LabelFor(m => m.Location, new { @class = "col-md-4 control-label" })
                                        <div class="col-md-8">
                                            @Html.TextBoxFor(m => m.Location, new { @class = "form-control", required = "required",id= "selBCICountry", placeholder = "Jersey City, New Jersey, USA" })
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        @Html.LabelFor(m => m.CompanyContactNumber, new { @class = "col-md-4 control-label" })
                                        <div class="col-md-8">
                                            @Html.TextBoxFor(m => m.CompanyContactNumber,new { @class = "form-control", required = "required", placeholder = "4402145601", pattern = ".{10,10}" })
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        @Html.LabelFor(m => m.FaxNumber, new { @class = "col-md-4 control-label" })
                                        <div class="col-md-8">
                                            @Html.TextBoxFor(m => m.FaxNumber, new { @class = "form-control",  placeholder = "244216" })
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        @Html.LabelFor(m => m.CompanyEmail, new { @class = "col-md-4 control-label" })
                                        <div class="col-md-8">
                                            @Html.TextBoxFor(m => m.CompanyEmail, new { @class = "form-control", required = "required", placeholder = "info@company.com" })
                                        </div>
                                    </div>
                                   
                                    <div class="form-group">
                                        @Html.LabelFor(m => m.WebsiteURL, new { @class = "col-md-4 control-label" })
                                        <div class="col-md-8">
                                            @Html.TextBoxFor(m => m.WebsiteURL, new { @class = "form-control", placeholder = "company.com" })
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        @Html.Label("GST/HST No.","GST/HST No.", new { @class = "col-md-4 control-label" })
                                        <div class="col-md-8">
                                            @Html.TextBoxFor(m => m.GSTRegNo, new { @class = "form-control", placeholder = "001256012" })
                                        </div>
                                    </div>
                                </div>
                            }

                            <div class="col-md-6 main-user-container">
                                <h3>
                                    User Detail
                                    @*@if (!string.IsNullOrEmpty(Model.CompanyName))
                                        {
                                            <span>(You are registering for company : @Model.CompanyName)</span>
                                        }*@
                                    @Html.HiddenFor(m => m.CompanyDetailId)
                                </h3>
                                <hr />
                                
                                <div class="form-group">
                                    @Html.LabelFor(m => m.FirstName, new { @class = "col-md-4 control-label" })
                                    <div class="col-md-8">
                                        @Html.TextBoxFor(m => m.FirstName, new { @class="form-control", required = "required", placeholder = "First name" })
                                    </div>
                                </div>
                                <div class="form-group">
                                    @Html.LabelFor(m => m.LastName, new { @class = "col-md-4 control-label" })
                                    <div class="col-md-8">
                                        @Html.TextBoxFor(m => m.LastName, new { @class = "form-control", required = "required", placeholder = "Last Name" })
                                    </div>
                                </div>
                                <div class="form-group">
                                    @Html.LabelFor(m => m.ContactNumber, new { @class = "col-md-4 control-label" })
                                    <div class="col-md-8">
                                        @Html.TextBoxFor(m => m.ContactNumber, new { @class = "form-control", required = "required", placeholder = "4404231450", pattern = ".{10,10}" })
                                    </div>
                                </div>
                                <div class="form-group">
                                    @Html.LabelFor(m => m.Extension, new { @class = "col-md-4 control-label" })
                                    <div class="col-md-8">
                                        @Html.TextBoxFor(m => m.Extension, new { @class = "form-control", required = "required", placeholder = "+1", pattern = ".{1,6}" })
                                    </div>
                                </div>
                                <div class="form-group">
                                    @Html.LabelFor(m => m.EmailAddress, new { @class = "col-md-4 control-label" })
                                    <div class="col-md-8">
                                        @Html.TextBoxFor(m => m.EmailAddress, new { @class = "form-control", required = "required", placeholder = "Username@domain.com" })
                                    </div>
                                </div>
                                <div class="form-group">
                                    @Html.LabelFor(m => m.Password, new { @class = "col-md-4 control-label" })
                                    <div class="col-md-8">
                                        @Html.PasswordFor(m => m.Password, new { @class = "form-control", required = "required", placeholder = "*********" })
                                    </div>
                                </div>
                                <div class="form-group">
                                    @Html.LabelFor(m => m.ConfirmPassword, new { @class = "col-md-4 control-label" })
                                    <div class="col-md-8">
                                        @Html.PasswordFor(m => m.ConfirmPassword, new { @class = "form-control", required = "required", placeholder = "*********" })
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <div class="col-md-offset-2 col-md-10">
                                    <input name="btnSubmit" type="submit" class="btn btn-primary" value="Register" />
                                </div>
                            </div>
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
                     
@{
                                if (Model.DisabledUserFields)
                                {
                                    <script>
                                        $(function () {
                                            $('.main-user-container input').attr('disabled', 'disabled');
                                        });
                                    </script>
                                }
                                if (Model.DisabledCompanyFields)
                                {
                                    <script>
                                        $(function () {
                                            $('.main-company-container input').attr('disabled', 'disabled');
                                        });
                                    </script>
                                }
                            }
<script>
$(document).ready(function() {
    var CompanyType = sessionStorage.getItem("CompanyTypeId");
    var ParentCompanyID = sessionStorage.getItem("Id");
    $('#hdCompanyType').val(CompanyType);
    $('#ParentCompanyID').val(ParentCompanyID);
    

});
</script>         

<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?libraries=places&key=AIzaSyDPKyEPE8dWcr14Y7T1_2WZhuXK4DJKQEs"></script>
<script type="text/javascript">

        google.maps.event.addDomListener(window, 'load', function () {
            var input = document.getElementById('selBCICountry');
            var places = new google.maps.places.Autocomplete(input);

            places.addListener('place_changed', function () {
                var Country = "";
                var City = "";
                var result = places.getPlace();

                for (var i = 0; i < result.address_components.length; i += 1) {
                    var addressObj = result.address_components[i];
                    for (var j = 0; j < addressObj.types.length; j += 1) {
                        if (addressObj.types[j] === 'country') {
                            console.log('country : ' + addressObj.long_name); // confirm that this is the country name
                            Country = addressObj.long_name;
                        }
                        if (addressObj.types[j] === 'administrative_area_level_1') {
                            console.log('state : ' + addressObj.long_name); // confirm that this is the state name
                        }
                        if (addressObj.types[j] === 'locality') {
                            console.log('city : ' + addressObj.long_name); // confirm that this is the city name
                            City = addressObj.long_name;
                        }
                    }
                }
                //$('#selBCICountry').val(City+" , "+Country);
            });

        });
</script>  