window.sso = {};
window.yatra = window.yatra || {};
window.yatra.userOps = window.yatra.userOps || {};
window.sso.register = function () { var a = window.location.href; window.sso.redirect("https://secure.yatra.com/social/common/yatra/register.htm", "returnUrl", a) };
window.sso.login = function () { var a = window.location.href; window.sso.redirect("https://secure.yatra.com/social/common/yatra/signin.htm", "returnUrl", a) };
window.sso.fbLogin = function () { var a = window.location.href; window.sso.redirect("https://secure.yatra.com/social/common/yatra/signin.htm?facebookLogin=true&", "returnUrl", a) };
window.sso.redirect = function (d, a, c) { var b = $('<form action="' + d + '" method="post"><input type="hidden" name="' + a + '" value="' + c + '"></input></form>'); $("body").append(b); $(b).submit() };
window.sso.isUserLoggedIn = function () { return document.cookie.indexOf("; userName=") != -1 && document.cookie.indexOf("userName=") != -1 };
window.sso.logout = function () { window.sso.preLogout(); $.ajax({ url: "/social/common/user/doLogout.htm", type: "POST", async: false, success: function (a) { }, error: function (a) { alert("An error occured: " + a.status + " " + a.statusText) } }); window.sso.postLogout() };
window.sso.preLogin = function () { }; window.sso.postLogin = function () { }; window.sso.preLogout = function () { if (window.yatra.userOps.onUserLogout != undefined) { window.yatra.userOps.onUserLogout() } }; window.sso.postLogout = function () { }; window.sso.getEmailId = function () { var a = ""; $.ajax({ url: "/social/common/user/getLoginInfo.htm", type: "POST", async: false, data: "json", success: function (b) { if (b) { a = b.userLoginInfo.emailId } }, error: function (b) { alert("An error occured: " + b.status + " " + b.statusText) } }); return a }; window.sso.getUserInfo = function () { userInfo = null; $.ajax({ url: "/social/common/user/getLoginInfo.htm", type: "POST", async: false, data: "json", success: function (a) { if (a) { userInfo = a.userLoginInfo } }, error: function (a) { alert("An error occured: " + a.status + " " + a.statusText) } }); return userInfo };