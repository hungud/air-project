@model IEnumerable<register_functionlity.DB.Model.BookingsModel>
@{
    ViewBag.Title = "About";
    Layout = "~/Views/Shared/_MasterLayoutMain.cshtml";
}


<div class="row">
    <div class="col-xs-12 col-sm-12">
        <div class="widget-body">
            <div class="widget-main">
                <div class="row">
                    <div class="container">
                        <input type="hidden" value="@ViewBag.Userid" />
                        @*<input type="hidden" value="@ViewBag.message" />*@
                        
                        <h2>Bookings</h2>
                        <hr />
                        <table id="dataTable" class="table table-bordered">
                            <thead>
                                <tr>
                                    <th>Locator</th>
                                    <th>Destination</th>
                                    <th>Departure</th>
                                    <th>ReservationDate</th>
                                    <th>DepartureDate</th>
                                    <th>Billing Email</th>
                                    <th>Billing Phone</th>
                                </tr>
                            </thead>
                            <tbody>
                               @{
                                    if (Model.Count() > 0)
                                    {

                                        foreach (var item in Model)
                                        {
                                            <tr>
                                                <td>
                                                    <a href="/Home/GetBookingDetails/@item.Id">@item.Locator</a>
                                                </td>
                                                <td>@item.Destination</td>
                                                <td>@item.Departure</td>
                                                <td>
                                                    @{
                                                        var date = item.ReservationDate; if (date.HasValue)
                                                        {
                                                            <div>@date.Value.ToString("dd/MM/yyyy")</div>
                                                        }
                                                    }
                                                </td>
                                                <td>
                                                    @{
                                                        date = item.DepartureDate; if (date.HasValue)
                                                        {
                                                            
                                                            <div>@date.Value.ToString("dd/MM/yyyy")</div>
                                                        }
                                                    }
                                                </td>
                                                <td>@item.BillingEmail</td>
                                                <td>@item.BillingPhone</td>
                                            </tr>
                                                            }

                                                        }
                                                        else
                                                        {
                                                            <tr>
                                                                <td colspan="8">
                                                                    No record found.
                                                                </td>
                                                            </tr>
                                                        }
                                }
                            </tbody>
                        </table>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<link href="https://cdn.datatables.net/1.10.16/css/dataTables.bootstrap.min.css" rel="stylesheet" />
<link href="https://cdn.datatables.net/buttons/1.5.0/css/buttons.bootstrap.min.css" rel="stylesheet" />
<link href="https://cdn.datatables.net/select/1.2.4/css/select.bootstrap.min.css" rel="stylesheet" />

<script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.16/js/dataTables.bootstrap.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.5.0/js/dataTables.buttons.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.5.0/js/buttons.bootstrap.min.js"></script>
<script src="https://cdn.datatables.net/select/1.2.4/js/dataTables.select.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.8.4/moment.min.js"></script>
<script src="https://cdn.datatables.net/plug-ins/1.10.19/sorting/datetime-moment.js"></script>

<script>
    
    $(document).ready(function () {
        //$.fn.dataTable.moment('HH:mm MMM D, YY');
        //$.fn.dataTable.moment('dddd, MMMM Do, YYYY');
        //$.fn.dataTable.moment('dd-MM-yyyy');

        //$('#dataTable').DataTable();


        $(document).ready(function () {
            $('#dataTable').dataTable({
                "aoColumns": [
                    null,
                    null,
                    null,                    
                    { "sType": "date-uk" },
                    { "sType": "date-uk" },
                    null,
                    null
                ], "order": [[3, "desc"]]
            });

        });

        jQuery.extend(jQuery.fn.dataTableExt.oSort, {
            "date-uk-pre": function (a) {
                var ukDatea = $(a).text().split('/');
                return (ukDatea[2] + ukDatea[1] + ukDatea[0]) * 1;
            },

            "date-uk-asc": function (a, b) {
                return ((a < b) ? -1 : ((a > b) ? 1 : 0));
            },

            "date-uk-desc": function (a, b) {
                return ((a < b) ? 1 : ((a > b) ? -1 : 0));
            }
        });
    });
</script>


<style>
    .dataTables_wrapper .row:first-child {
    background-color: #EFF3F8;
    padding: 10px 0 4px 0;
}
</style>